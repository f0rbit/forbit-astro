---
import ProjectCard from '../ProjectCard.astro';
import type { Project } from '../../env';

const projects = (await (await fetch(import.meta.env.PROJECT_URL)).json()) as
    | { success: true; data: Project[]; error: null }
    | { success: false; data: null; error: string }

const recent_projects = projects.data?.sort((a: Project, b: Project) => (new Date(a.updated_at)).getTime() - (new Date(b.updated_at)).getTime()) ?? [];

export const prerender = false;
---
{recent_projects.slice(0, 3).map((project) => <ProjectCard project={project} />)}
